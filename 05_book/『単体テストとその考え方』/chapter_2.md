# 単体テストの価値

良い単体テストは下記の4本の柱がある
- 退行に対する保護
- リファクタリングへの耐性
- 迅速なフィードバック
- 保守のしやすさ

## 退行に対する保護
コードの重要性を把握する必要がある。
- ドメインロジックはテストする価値が高い
- ボイラープレートやプロパティはテストする価値は低い

## リファクタリングへの耐性
### 偽陽性とは?
正しい結果をテストが間違って偽と判定すること

### 偽陽性を防ぐには？
- 呼び出し側からみて意味のある結果のみを検証する
  - 実装の詳細やアルゴリズムは検証しない
- 実装の詳細まで検証してはならない。
  - テストケースが壊れやすくなるため

### 偽陽性が大きな問題となる時期は？
- プロジェクトが大きくなった時
  - リファクタリングが必要になる
    - リファクタ後、正しい動作を保証することができない。

## スタブとモックについて
### スタブとモックの違い
- スタブとは
  - クエリ(要求)
  - 内部に向かうコミュニケーション(入力)に対する依存
- モックとは
  - コマンド(命令)
  - 外部に向かうコミュニケーション(出力)に対する依存

### ★スタブとのコミュニケーションの検証はアンチパターン
スタブとのコミュニケーションは最終的な結果を得るための1過程にすぎないから

### ★スタブとモックの両方の性質を持つオブジェクトはモック
- モックであることの方がテストにとって重要な意味がある
- １つしか命名できないため

## 観察可能なふるまいと実装の詳細

### 実装の詳細は隠さなければならない
ファクタリングへの耐性が低くなる(テストが壊れやすい)

### 実装の詳細を見極めるポイント
１つの操作で目標を達成できているか。
  - 異なる関数の複数回呼び出しを行っていないか？
